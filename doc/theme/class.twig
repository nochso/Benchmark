{% extends 'default/class.twig' %}
{% from "default/macros.twig" import method_link, hint_link, source_link %}

{% block head %}{{ parent() }}
  <link rel="stylesheet" type="text/css" href="{{ path('css/prism.css') }}">
  <script src="{{ path('js/prism.js') }}"></script>{% endblock %}

{% block page_content %}
  {{ parent() }}
  <h2>Source code</h2>
  <pre id="source" class="line-numbers"><code>{{ file_get_contents(class.file) }}</code></pre>
{% endblock %}

{% block content %}<div class="language-php">{{ parent() }}</div>{% endblock %}

{% block methods %}
<table class="table table-condensed">
    {% for method in methods %}
      <tr>
        <td class="pull-right">
          <code>{% if method.static %}static&nbsp;{% endif %}{{ hint_link(method.hint) }}</code>
        </td>
        <td>
          <code><a href="#method_{{ method.name }}">{{ method.name }}</a>{{ block('method_parameters_signature') }}</code>
          {% if not method.shortdesc %}
            <p class="no-description">No description</p>
          {% else %}
            <p>{{ method.shortdesc|desc(class) }}</p>
          {%- endif %}
        </td>
        <td class="location">
          {%- if method.class is not same as(class) -%}
            <small>from&nbsp;{{ method_link(method, false, true) }}</small>
          {%- else -%}<a href="#source.{{ method.line }}">#{{ method.line }}</a>{%- endif -%}
        </td>
        </tr>
    {% endfor %}
</table>
{% endblock %}

{% block method_signature -%}
{% if method.final %}final{% endif %}
{% if method.abstract %}abstract{% endif %}
{% if method.static %}static{% endif %}
{% if method.protected %}protected{% endif %}
{% if method.private %}private{% endif %}
 {{ hint_link(method.hint) }} <span style="font-size: larger !important;">{{ method.name }}</span>{{ block('method_parameters_signature') }}
{%- endblock %}


{% block method %}
  <h3 id="method_{{ method.name }}">
    <div class="location">{% if method.class is not same as(class) -%}
      in {{ method_link(method, false, true) }} at line {{ method.line }}
      {% else %}<a href="#source.{{ method.line }}">#{{ method.line }}</a>{% endif %}</div>
    <code>{{ block('method_signature') }}</code>
  </h3>
  <div class="details">
    {% if method.shortdesc or method.longdesc %}
      <div class="method-description">
        {% if not method.shortdesc and not method.longdesc %}
          <p class="no-description">No description</p>
        {% else %}
          {% if method.shortdesc -%}
            <p>{{ method.shortdesc|desc(class) }}</p>
          {%- endif %}
          {% if method.longdesc -%}
            <p>{{ method.longdesc|desc(class) }}</p>
          {%- endif %}
        {%- endif %}
      </div>
    {% endif %}
    <div class="tags">
      {% if method.parameters %}
        <h4>Parameters</h4>

        {{ block('parameters') }}
      {% endif %}

      {% if method.hintDesc or method.hint %}
        <h4>Return Value</h4>

        {{ block('return') }}
      {% endif %}

      {% if method.exceptions %}
        <h4>Exceptions</h4>

        {{ block('exceptions') }}
      {% endif %}

      {% if method.tags('see') %}
        <h4>See also</h4>

        {{ block('see') }}
      {% endif %}
    </div>
  </div>
{% endblock %}


{% block parameters %}
  <table class="table table-condensed">
    {% for parameter in method.parameters %}
      <tr>
        <td>{% if parameter.hint %}<code>{{ hint_link(parameter.hint) }}</code>{% endif %}</td>
        <td><code>${{ parameter.name }}</code></td>
        <td>{{ parameter.shortdesc|desc(class) }}</td>
      </tr>
    {% endfor %}
  </table>
{% endblock %}
