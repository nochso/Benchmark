<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8" /><meta name="robots" content="index, follow, all" /><title>nochso\Benchmark\ResultBounds | noch.so Benchmark documentation</title><link rel="stylesheet" type="text/css" href="../../css/normalize.css"><link rel="stylesheet" type="text/css" href="../../css/min.css"><link rel="stylesheet" type="text/css" href="../../css/prism.css"><link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,700,400italic' rel='stylesheet' type='text/css'><script src="../../js/prism.js"></script><meta name="MobileOptimized" content="width"><meta name="HandheldFriendly" content="true"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"></head><body id="class" data-name="class:nochso_Benchmark_ResultBounds" data-root-path="../../"><nav><div class="container"><div class="title"><a href="../../index.html">noch.so Benchmark documentation</a></div><ul><li><a href="../../classes.html">Classes</a></li><li><a href="../../namespaces.html">Namespaces</a></li><li><a href="../../interfaces.html">Interfaces</a></li><li><a href="../../traits.html">Traits</a></li><li><a href="../../doc-index.html">Index</a></li><li><a href="../../search.html">Search</a></li></ul><ol class="breadcrumb"><li><a href="../../nochso.html">nochso</a></li><li><a href="../../nochso/Benchmark.html">Benchmark</a></li><li>ResultBounds</li></ol></div></nav><div class="container"><div class="row"><div id="control-panel"></div><div id="api-tree"></div></div><div class="row"><h1>ResultBounds</h1><p> class <strong>ResultBounds</strong></p><p>ResultBounds.</p><h2>Methods</h2><table class="table"><tr><td><code class="language-php"> public </code></td><td class="text-right"><code class="language-php"></code></td><td><code class="language-php"><a href="#method___construct">__construct</a>($unitResult)</code></td><td> No description </td><td></td></tr><tr><td><code class="language-php"> public </code></td><td class="text-right"><code class="language-php">array|null</code></td><td><code class="language-php"><a href="#method_get">get</a>(string $path, null $default = null)</code></td><td> No description </td><td></td></tr><tr><td><code class="language-php"> public </code></td><td class="text-right"><code class="language-php"></code></td><td><code class="language-php"><a href="#method_set">set</a>(string $path, float $value)</code></td><td> No description </td><td></td></tr><tr><td><code class="language-php"> public </code></td><td class="text-right"><code class="language-php">array|null</code></td><td><code class="language-php"><a href="#method_max">max</a>(string $path, null|float $value = null)</code></td><td> No description </td><td></td></tr><tr><td><code class="language-php"> public </code></td><td class="text-right"><code class="language-php">array|null</code></td><td><code class="language-php"><a href="#method_min">min</a>(string $path, null|float $value = null)</code></td><td> No description </td><td></td></tr><tr><td><code class="language-php"> public </code></td><td class="text-right"><code class="language-php"></code></td><td><code class="language-php"><a href="#method_prepare">prepare</a>()</code></td><td> No description </td><td></td></tr></table><h2>Details</h2><div id="method-details"><div><div class="float-right"> at line <a href="#source.27">27</a></div><div><h3 id="method___construct"><code class="language-php">__construct()</code></h3><code class="language-php">public __construct($unitResult)</code></div></div><div class="details"><h4>Parameters</h4><table class="table"><tr><td></td><td><code class="language-php">$unitResult</code></td><td></td></tr></table></div><div><div class="float-right"> at line <a href="#source.38">38</a></div><div><h3 id="method_get"><code class="language-php">get()</code></h3><code class="language-php">public array|null&nbsp;get(string $path, null $default = null)</code></div></div><div class="details"><h4>Parameters</h4><table class="table"><tr><td><code class="language-php">string</code></td><td><code class="language-php">$path</code></td><td></td></tr><tr><td><code class="language-php">null</code></td><td><code class="language-php">$default</code></td><td></td></tr></table><h4>Return Value</h4><table class="table"><tr><td><code class="language-php">array|null</code></td><td></td></tr></table></div><div><div class="float-right"> at line <a href="#source.55">55</a></div><div><h3 id="method_set"><code class="language-php">set()</code></h3><code class="language-php">public set(string $path, float $value)</code></div></div><div class="details"><h4>Parameters</h4><table class="table"><tr><td><code class="language-php">string</code></td><td><code class="language-php">$path</code></td><td></td></tr><tr><td><code class="language-php">float</code></td><td><code class="language-php">$value</code></td><td></td></tr></table></div><div><div class="float-right"> at line <a href="#source.74">74</a></div><div><h3 id="method_max"><code class="language-php">max()</code></h3><code class="language-php">public array|null&nbsp;max(string $path, null|float $value = null)</code></div></div><div class="details"><h4>Parameters</h4><table class="table"><tr><td><code class="language-php">string</code></td><td><code class="language-php">$path</code></td><td></td></tr><tr><td><code class="language-php">null|float</code></td><td><code class="language-php">$value</code></td><td></td></tr></table><h4>Return Value</h4><table class="table"><tr><td><code class="language-php">array|null</code></td><td></td></tr></table></div><div><div class="float-right"> at line <a href="#source.89">89</a></div><div><h3 id="method_min"><code class="language-php">min()</code></h3><code class="language-php">public array|null&nbsp;min(string $path, null|float $value = null)</code></div></div><div class="details"><h4>Parameters</h4><table class="table"><tr><td><code class="language-php">string</code></td><td><code class="language-php">$path</code></td><td></td></tr><tr><td><code class="language-php">null|float</code></td><td><code class="language-php">$value</code></td><td></td></tr></table><h4>Return Value</h4><table class="table"><tr><td><code class="language-php">array|null</code></td><td></td></tr></table></div><div><div class="float-right"> at line <a href="#source.98">98</a></div><div><h3 id="method_prepare"><code class="language-php">prepare()</code></h3><code class="language-php">public prepare()</code></div></div><div class="details"></div></div><h2>Source code</h2><pre class="language-php line-numbers" id="source"><code>&lt;?php

/*
 * This file is part of nochso/benchmark.
 *
 * @copyright Copyright (c) 2015 Marcel Voigt &lt;mv@noch.so&gt;
 * @license   https://github.com/nochso/benchmark/blob/master/LICENSE ISC
 * @link      https://github.com/nochso/benchmark
 */

namespace nochso\Benchmark;

/**
 * ResultBounds.
 *
 * @author Marcel Voigt &lt;mv@noch.so&gt;
 * @copyright Copyright (c) 2015 Marcel Voigt &lt;mv@noch.so&gt;
 */
class ResultBounds
{
    private $bounds = array();
    /**
     * @var UnitResult
     */
    private $unitResult;

    public function __construct($unitResult)
    {
        $this-&gt;unitResult = $unitResult;
    }

    /**
     * @param string $path
     * @param null   $default
     *
     * @return array|null
     */
    public function get($path, $default = null)
    {
        $paths = explode(&#039;.&#039;, $path);
        $result = $this-&gt;bounds;
        foreach ($paths as $path) {
            if (!array_key_exists($path, $result)) {
                return $default;
            }
            $result = $result[$path];
        }
        return $result;
    }

    /**
     * @param string $path
     * @param float  $value
     */
    public function set($path, $value)
    {
        $paths = explode(&#039;.&#039;, $path);
        $result = &amp;$this-&gt;bounds;
        foreach ($paths as $key =&gt; $path) {
            if (!array_key_exists($path, $result)) {
                $result[$path] = array();
            }
            $result = &amp;$result[$path];
        }
        $result = $value;
    }

    /**
     * @param string     $path
     * @param null|float $value
     *
     * @return array|null
     */
    public function max($path, $value = null)
    {
        $path = $path . &#039;.max&#039;;
        if ($value !== null) {
            $this-&gt;set($path, max($this-&gt;get($path, 0), $value));
        }
        return $this-&gt;get($path);
    }

    /**
     * @param string     $path
     * @param null|float $value
     *
     * @return array|null
     */
    public function min($path, $value = null)
    {
        $path = $path . &#039;.min&#039;;
        if ($value !== null) {
            $this-&gt;set($path, min($this-&gt;get($path, PHP_INT_MAX), $value));
        }
        return $this-&gt;get($path);
    }

    public function prepare()
    {
        $this-&gt;prepareBoundsParameter();
        $this-&gt;prepareBoundsMedian();
    }

    private function prepareBoundsParameter()
    {
        if ($this-&gt;get(&#039;parameter&#039;) !== null) {
            return;
        }
        foreach ($this-&gt;unitResult-&gt;getResults() as $methodName =&gt; $results) {
            $this-&gt;prepareBoundsMethodResults($results);
        }
    }

    private function prepareBoundsMedian()
    {
        if ($this-&gt;get(&#039;median.max&#039;) !== null) {
            return;
        }
        foreach ($this-&gt;unitResult-&gt;getResults() as $methodName =&gt; $results) {
            $res = reset($results);
            $methodResult = $this-&gt;unitResult-&gt;getMedianMethodResult($res-&gt;getMethod());
            $opsPerSec = $methodResult-&gt;getOperationsPerSecond();
            $this-&gt;max(&#039;median&#039;, $opsPerSec);
            $this-&gt;min(&#039;median&#039;, $opsPerSec);
        }
    }

    /**
     * @param Result[] $results
     */
    private function prepareBoundsMethodResults($results)
    {
        /** @var Result $first */
        $first = reset($results);
        $method = $first-&gt;getMethod();
        foreach ($this-&gt;unitResult-&gt;getMethodResults($method, true) as $result) {
            $this-&gt;prepareBoundsMethodResult($result);
        }
    }

    /**
     * @param Result $result
     */
    private function prepareBoundsMethodResult(Result $result)
    {
        $paramName = null;
        $parameter = $result-&gt;getParameter();
        if ($parameter !== null) {
            $paramName = $parameter-&gt;getName();
        }
        $ops = $result-&gt;getOperationsPerSecond();
        $this-&gt;max(&#039;parameter.&#039; . $paramName, $ops);
        $this-&gt;min(&#039;parameter.&#039; . $paramName, $ops);
    }
}
</code></pre></div><div class="row"><div id="footer"> Generated by <a href="http://sami.sensiolabs.org/">Sami, the API Documentation Generator</a> using <a href="https://github.com/nochso/sami-theme">nochso/sami-theme</a>. </div></div></div></body></html>